let e=new IntersectionObserver((function(e){e.forEach((e=>{e.isIntersecting&&(n.page,l())}))}));const t={form:document.querySelector(".js-search-form"),list:document.querySelector(".js-gallery"),loadMoreBlock:document.querySelector(".target-element")},{form:s,list:a,loadMoreBlock:r}=t,n=new class{#e="https://api.unsplash.com/search/photos";#t="LxvKVGJqiSe6NcEVZOaLXC-f2JIIWZaq_o0WrF8mwJc";#s;#a;#r;#n=new URLSearchParams({per_page:30,client_id:this.#t,color:"black",orientation:"portrait"});constructor(){this.#s=1,this.#a="",this.#r=0}async getImages(){const e=await fetch(`${this.#e}?query=${this.#a}&page=${this.#s}&${this.#n}`);if(e.ok)return e.json();throw new Error(e.statusText)}get page(){return this.#s}set page(e){this.#s=e}set searchQuery(e){this.#a=e}get searchQuery(){return this.#a}get totalPages(){return this.#r}set totalPages(e){this.#r=e}};function i(e){return e.map((({urls:e,alt_description:t})=>`<li class="gallery__item">\n        <img src="${e.small}" alt="${t}" class="gallery-img">\n    </li>`)).join("")}let o=!1;async function l(){if(n.page=1,o)return;o=!0;const t=await n.getImages();a.insertAdjacentHTML("beforeend",i(t.results)),n.page===n.totalPages&&(r.classList.remove("is-visible"),e.unobserve(r)),o=!1}s.addEventListener("submit",(async function(e){e.preventDefault(),a.innerHTML="",n.page=1;const t=s.elements.query.value.trim();if(""===t)return;n.searchQuery=t;const o=await n.getImages();if(0===o.results.length)return alert("No results");n.totalPages=o.total_pages,a.insertAdjacentHTML("beforeend",i(o.results)),l(),n.total_pages>1&&r.classList.add("is-visible")}));
//# sourceMappingURL=index.8d217e88.js.map
